<!--pages/hotel/index.wxml-->
<import src="../template/commons" />
<template is="navigationBarForTwoLevel" data='{{statusBarHeight: statusBarHeight,titleText:"餐厅列表"}}' />

<view class="container flex-column-center-flex_start theme-container" style='height: calc(100vh - 46px - {{statusBarHeight}}px);'>
	<view class='page_top' >
		<view class='v-structure flex-row-center-space_between theme-panel-2 font_666666_28'>
			<picker bindchange="bindCityPickerChange" value="{{cityIndex}}" range="{{cityArray}}">
				<view class='city_show'>
					<label class="fa fa-map-o icon"></label>
					<label>{{cityArray[cityIndex]}}</label>
				</view>
			</picker>
			<picker bindchange="bindAreaPickerChange" value="{{areaIndex}}" range="{{areaArray}}">
				<view class='area_show'>
					<label>{{areaArray[areaIndex]}}</label>
					<label class="fa fa-caret-down icon"></label>
				</view>
			</picker>
			<picker bindchange="bindCuiPickerChange" value="{{cuisineIndex}}" range="{{cuisineArray}}">
				<view class='cuisine_show'>
					<label>{{cuisineArray[cuisineIndex]}}</label>
					<label class="fa fa-caret-down icon"></label>
				</view>
			</picker>
			<picker bindchange="bindPayPickerChange" value="{{perCapitaPayIndex}}" range="{{perCapitaPayArray}}">
				<view class='perCapitaPay_show'>
					<label>{{perCapitaPayArray[perCapitaPayIndex]}}</label>
					<label class="fa fa-caret-down icon"></label>
				</view>
			</picker>
			<!--
			<view class="fa fa-search" aria-hidden="true"></view>
			-->
		</view>
	</view>
	<scroll-view class='{{is_link==1 ? "page_main_scroll_banner": "page_main_scroll" }}' scroll-y="true" scroll-with-animation="true" bindscrolltolower="loadMore">
		<view class='page_main'>
			<block wx:for="{{hotel_list}}" wx:key="key" wx:for-item="bean" wx:for-index="index">
				<view class='row-item flex-row-flex_start-start' bindtap="gotoHotelDetail" data-merchant_id="{{bean.merchant_id}}">
					<view class='cover'  data-src="{{bean.img_url}}" data-hotelid="{{bean.hotel_id}}">
						<image wx:if="{{bean.img_url !=''}}" mode="aspectFill" src='{{bean.img_url}}' binderror="bindImgErro" data-index="{{index}}"></image>
            <image wx:if="{{bean.img_url ==''}}" mode="aspectFill" src='/images/imgs/default-pic.png' ></image>

						<view class="flex-column-center-flex_end" wx:if="{{bean.is_takeout==1}}">
							<view class="flex-column-center-center theme-button-buy">支持外卖</view>
						</view>
					</view>
					<view class='i-right'>
						<view class='ir-top flex-row-flex_start-start'>
							<view class='irt-left'>
								<label class='font_999999_28'>{{bean.name}}</label>
								<view class='irtl-bottom font_666666_24'>
									<label>{{bean.food_name}}</label>
									<label style='margin-left:50rpx;' wx:if="{{bean.avg_expense>0}}">￥{{bean.avg_expense}}/人</label>
									<label style='margin-left:50rpx;' wx:else></label>
								</view>
							</view>
						</view>
						<view class='address font_666666_24'>
							<label class="fa fa-map-marker icon"></label>
							<label>{{bean.addr}}</label>
						</view>
					</view>
				</view>
			</block>
		</view>
	</scroll-view>
	<view class="body-view">
		<loading hidden="{{hiddens}}" bindchange="loadingChange">加载中...</loading>
	</view>
</view>