<!--pages/recommend/hotel.wxml-->
<import src="../template/commons" />
<template is="navigationBarForTopLevel" data='{{statusBarHeight: statusBarHeight,titleText:"热点投屏"}}' />

<view class="container flex-column-center-flex_start theme-container" style='height: calc(100vh - 46px - {{statusBarHeight}}px);'>
  <view wx:if="{{is_link==1}}" class='page_banner theme7 theme-font'>
    <view class='layout flex-row-center-space_between'>
      <label class="one-line-overflow">您已经连接{{room_name}}电视</label>
      <navigator target="miniProgram" app-id="{{rest_appid}}" path="pages/index/index?box_mac={{box_mac}}" class='theme-button'>前往餐厅版</navigator>
      <!-- <navigator version="trial" target="miniProgram" app-id="{{jijian_appid}}" path="pages/index/index?box_mac={{box_mac}}" class='theme-button'>前往极简版</navigator> -->
    </view>
  </view>
  <view class='page_top'>
    <view class='v-structure flex-row-center-space_between theme-panel-2 font_666666_28'>
      <picker bindchange="bindCityPickerChange" value="{{cityIndex}}" range="{{cityArray}}">
        <view class='city_show'>
          <label class="fa fa-map-o icon"></label>
          <label>{{cityArray[cityIndex]}}</label>
        </view>
      </picker>
      <picker bindchange="bindAreaPickerChange" value="{{areaIndex}}" range="{{areaArray}}">
        <view class='area_show'>
          <label>{{areaArray[areaIndex]}}</label>
          <label class="fa fa-caret-down icon"></label>
        </view>
      </picker>
      <picker bindchange="bindCuiPickerChange" value="{{cuisineIndex}}" range="{{cuisineArray}}">
        <view class='cuisine_show'>
          <label>{{cuisineArray[cuisineIndex]}}</label>
          <label class="fa fa-caret-down icon"></label>
        </view>
      </picker>
      <picker bindchange="bindPayPickerChange" value="{{perCapitaPayIndex}}" range="{{perCapitaPayArray}}">
        <view class='perCapitaPay_show'>
          <label>{{perCapitaPayArray[perCapitaPayIndex]}}</label>
          <label class="fa fa-caret-down icon"></label>
        </view>
      </picker>
    </view>
  </view>
  <scroll-view class='{{is_link==1 ? "page_main_scroll_banner": "page_main_scroll" }}' scroll-y="true" scroll-with-animation="true" bindscrolltolower="loadMore">
    <view class='page_main'>
      <view class='row-item flex-row-flex_start-start' wx:for="{{hotel_list}}" wx:key="key" wx:for-item="bean" wx:for-index="index">
        <view class='cover' bindtap="previewImage" data-src="{{bean.img_url}}">
          <image src='{{bean.img_url}}'></image>
        </view>
        <view class='i-right'>
          <view class='ir-top flex-row-flex_start-start'>
            <view class='irt-left'>
              <label class='font_999999_28'>{{bean.name}}</label>
              <view class='irtl-bottom font_666666_24'>
                <label>{{bean.food_name}}</label>
                <label style='margin-left:50rpx;' wx:if="{{bean.avg_expense>0}}">￥{{bean.avg_expense}}/人</label>
                <label style='margin-left:50rpx;' wx:else></label>
              </view>
            </view>
            <view class='option' wx:if="{{bean.tel !=''}}">
              <button class='theme-button' bindtap='phonecallevent' data-tel="{{bean.tel}}">预订电话</button>
            </view>
          </view>
          <view class='address font_666666_24'>
            <label class="fa fa-map-marker icon"></label>
            <label>{{bean.addr}}</label>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>
  <view wx:if="{{close_hotel_hint==0}}" class='full_width flex-for-bottom flex-column-center-center'>
    <view class='flex-tip theme-button'>
      <label>以上餐厅均可进行电视互动，体验投屏功能~</label>
      <label class='fa fa-times-circle-o btn-colse' bindtap='closeHotelHind' data-openid='{{openid}}'></label>
    </view>
  </view>
  <view class="body-view">
    <loading hidden="{{hiddens}}" bindchange="loadingChange">加载中...</loading>
  </view>
</view>

<!-- 遥控器 -->
<template is="remoteControlWindow" data='{{popRemoteControlWindow: popRemoteControlWindow, qrcode_img:qrcode_img, box_mac:box_mac, openid:openid, hotel_info:hotel_info}}' />

<modal show="{{wifiErr.is_open==1 ? true : false}}" width="650rpx" height='380rpx' border-radius="10rpx" title-text='提示' title-color="#333333" title-background-color="unset" title-border-radius="0rpx" confirm-text='{{wifiErr.confirm}}' confirm-color="#FFFFFF" confirm-background-color="#1cbeb6" confirm-border-radius="10rpx" cancel-text='{{wifiErr.cancel}}' cancel-color='#FFFFFF' cancel-background-color="#333333" cancel-border-radius="10rpx" bindcancel="modalCancel" data-hotel_info="{{hotel_info}}" bindconfirm='modalConfirm'>
  <view class="theme-font1" style="padding:0 50rpx;font-size:28rpx;">{{wifiErr.msg}}</view>
</modal>

<!-- 固定悬浮按钮组 -->
<view wx:if="{{box_mac !=''}}">
  <template is="fixedSuspensionButtonGroup" />
</view>